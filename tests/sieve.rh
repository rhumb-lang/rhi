% sieve.rh
% Sieve of Eratosthenes up to 10,000

% Stress test Map access (\), loops (<>), and mutable assignment (:=).

limit .= 10000
flags .= []

% Initialize all to true (1)
1|limit <> [i] -> flags\i := yes

count := 0
2|limit <> [i] -> (
  is_prime .= flags\i
  
  is_prime => (
    count := count ++ 1
      
    % Mark multiples
    k := i ++ i
    k <= limit |> (
      flags\k := no
      k := k ++ i
    )
  )
)

count %= 9999